// Reusable content components
model Section {
    id        String           @id @default(cuid())
    title     String // Component name
    SectionType      SectionType // Component classification
    isGlobal  Boolean          @default(false) // Whether section can be reused across resources
    // Version history
    versions  SectionVersion[]
    // Timestamps
    createdAt DateTime         @default(now())
    updatedAt DateTime         @updatedAt

    // Indexes
    @@index([SectionType]) // For component filtering
    @@index([isGlobal]) // For finding reusable components
}

// Versioned section content
model SectionVersion {
    id                      String                   @id @default(cuid())
    version                 Int // Version sequence number
    heading                 String? // Optional title
    description             String? // Optional subtitle
    content                 Json // Component-specific data
    // Relationships with cascading deletes
    section                 Section                  @relation(fields: [sectionId], references: [id], onDelete: Cascade)
    sectionId               String
    resource                Resource                 @relation(fields: [resourceId], references: [id], onDelete: Cascade)
    resourceId              String
    resourceVersion         ResourceVersion          @relation(fields: [resourceVersionId], references: [id], onDelete: Cascade)
    resourceVersionId       String
    items                   SectionVersionItem[] // Nested content items
    resourceVersionSections ResourceVersionSection[]

    // Composite constraints
    @@unique([sectionId, resourceId, version]) // Version uniqueness
    @@index([sectionId, resourceId]) // For section history
    @@index([resourceVersionId]) // For version assembly
    @@index([sectionId])
    @@index([resourceId])
}
